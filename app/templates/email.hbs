<div class="row">
  <div class="col-md-8 header">
    <h1>Email messages</h1>
    <h2>
      <small>
        When executing Business Logic using the offline tester, any email messages sent using the <a href="http://devcenter.kinvey.com/rest/reference/business-logic/reference.html#email-module" target="_blank">email module</a>
        are saved to the <code>_outgoingEmailMessages</code> collection. This page polls this collection every few seconds, and will display information about any email messages contained within it.
        <br><br>
        To manually refresh the contents of the collection, click the refresh button ( <span class="glyphicon glyphicon-refresh"></span> ), and to clear all saved email messages, click the clear button ( <span class="glyphicon glyphicon-trash"></span> ) below.
      </small>
    </h2>
    <br>
  </div>
</div>
<div class="row">
  <div class="col-md-8 header">
    <button type="button" class="btn btn-default btn-md" title="Refresh" {{action 'refreshMessageList'}}>
      <span class="glyphicon glyphicon-refresh"></span>
    </button>

    <button type="button" class="btn btn-default btn-md" title="Clear all messages" {{action 'clearMessageList'}}>
      <span class="glyphicon glyphicon-trash"></span>
    </button>
    {{#if sortedMessages.length}}
      <table class="table table-striped messageTable">
        <tr>
          <th>Time</th>
          <th>Subject</th>
          <th>From</th>
          <th>To</th>
          <th>Message</th>
        </tr>
        {{#each record in sortedMessages}}
        <tr>
          <td>{{record.timestamp}}</td>
          <td>{{record.message.subject}}</td>
          <td>{{record.message.from}}</td>
          <td>{{record.message.to}}</td>
          <td>{{record.message.body}}</td>
        </tr>
        {{/each}}
      </table>
    {{else}}
      <h3>No Messages</h3>
    {{/if}}
  </div>
</div>